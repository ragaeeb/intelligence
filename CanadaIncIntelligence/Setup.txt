CREATE TABLE devices (id INTEGER PRIMARY KEY, machine TEXT UNIQUE, hardware_id TEXT, model_name TEXT, physical_keyboard INTEGER, model_number TEXT, device_memory INTEGER);
CREATE TABLE operating_systems (id INTEGER PRIMARY KEY, version TEXT, creation_date INTEGER, UNIQUE(version, creation_date) ON CONFLICT IGNORE);
CREATE TABLE canadainc_apps (id INTEGER PRIMARY KEY, name TEXT NOT NULL, version TEXT NOT NULL, path TEXT, UNIQUE(name, version) ON CONFLICT IGNORE);
CREATE TABLE locales (id INTEGER PRIMARY KEY, locale TEXT UNIQUE);

CREATE TABLE users (id INTEGER PRIMARY KEY, bcm0 TEXT UNIQUE, device_id INTEGER REFERENCES devices(id), node_name TEXT, internal INTEGER, imei TEXT, meid TEXT, pin TEXT, UNIQUE(bcm0,device_id,imei,pin) ON CONFLICT REPLACE);
CREATE TABLE user_info (user_id INTEGER REFERENCES users(id), address TEXT UNIQUE ON CONFLICT IGNORE);

CREATE TABLE reports (id INTEGER PRIMARY KEY, app_id INTEGER REFERENCES canadainc_apps(id), locale INTEGER REFERENCES locales(id), user_id INTEGER REFERENCES users(id), os_id INTEGER REFERENCES operating_systems(id), memory_usage INTEGER, available_memory INTEGER, boot_time INTEGER, msm0 TEXT, bcm0 TEXT, battery_temperature INTEGER, battery_level INTEGER, battery_cycle_count INTEGER, battery_charging_state INTEGER, ip TEXT, host TEXT);

CREATE TABLE geo (id INTEGER PRIMARY KEY, city TEXT, region TEXT, country TEXT, UNIQUE(city, region, country) ON CONFLICT IGNORE);
CREATE TABLE locations (report_id INTEGER REFERENCES reports(id), latitude REAL, longitude REAL, geo_id INTEGER REFERENCES geo(id), name TEXT);

CREATE TABLE bbworld_apps (id INTEGER PRIMARY KEY, name TEXT, sku TEXT, vendor TEXT, icon_uri TEXT);
CREATE TABLE device_apps (id INTEGER PRIMARY KEY, package_name TEXT, package_id TEXT, bbworld_id INTEGER REFERENCES bbworld_apps(id) DEFAULT 0);
CREATE TABLE removed_apps (report_id INTEGER REFERENCES reports(id), device_app_id INTEGER REFERENCES device_apps(id));

CREATE TABLE database_stats (report_id INTEGER REFERENCES reports(id), query_id INTEGER, duration INTEGER, num_elements INTEGER);
CREATE TABLE user_events (id INTEGER PRIMARY KEY, event TEXT UNIQUE);
CREATE TABLE app_user_events (report_id INTEGER REFERENCES reports(id), user_event_id INTEGER REFERENCES user_events(id));
CREATE TABLE app_settings (app_id INTEGER REFERENCES apps(id), setting_key TEXT, UNIQUE(app_id, setting_key) ON CONFLICT IGNORE);
CREATE TABLE report_app_settings (report_id INTEGER REFERENCES reports(id), app_setting_id INTEGER REFERENCES app_settings(id), setting_value TEXT);

CREATE TABLE accounts_selected(report_id INTEGER REFERENCES reports(id), account_id INTEGER);
CREATE TABLE bulk_operations(report_id INTEGER REFERENCES reports(id), type TEXT, count INTEGER);
CREATE TABLE conversations_fetched(report_id INTEGER REFERENCES reports(id), count INTEGER);
CREATE TABLE elements_fetched(report_id INTEGER REFERENCES reports(id), count INTEGER);
CREATE TABLE in_app_searches(report_id INTEGER REFERENCES reports(id), name TEXT, query_value TEXT);
CREATE TABLE invoke_targets(report_id INTEGER REFERENCES reports(id), target_id TEXT, uri TEXT, data TEXT);
CREATE TABLE total_accounts(report_id INTEGER REFERENCES reports(id), total INTEGER);


oct:
CREATE TABLE oct_routes_accessed(report_id INTEGER REFERENCES reports(id), stop_number INTEGER, route_number INTEGER, timestamp INTEGER);

sunnah10:
CREATE TABLE sunnah10_bookmarks(report_id INTEGER REFERENCES reports(id), arabic_id INTEGER, UNIQUE(report_id, arabic_id) ON CONFLICT IGNORE);
CREATE TABLE sunnah10_collections_accessed(report_id INTEGER REFERENCES reports(id), collection_name TEXT);
CREATE TABLE sunnah10_narrations_accessed(report_id INTEGER REFERENCES reports(id), arabic_id INTEGER);

quran10:
CREATE TABLE quran10_bookmarks(report_id INTEGER REFERENCES reports(id), surah_id INTEGER, verse_id INTEGER, UNIQUE(report_id, surah_id, verse_id) ON CONFLICT IGNORE);
CREATE TABLE quran10_playlists(report_id INTEGER REFERENCES reports(id), surah_id INTEGER, verse_id_start INTEGER, verse_id_end INTEGER);